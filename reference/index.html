


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.0">
    
    
      
        <title>Reference - HLB (High-level build)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.89dc9fe3.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/asciinema-player.css">
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#functions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="HLB (High-level build)" class="md-header-nav__button md-logo" aria-label="HLB (High-level build)">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            HLB (High-level build)
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Reference
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://openllb.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openllb/hlb
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HLB (High-level build)" class="md-nav__button md-logo" aria-label="HLB (High-level build)">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    HLB (High-level build)
  </label>
  
    <div class="md-nav__source">
      
<a href="https://openllb.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openllb/hlb
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Introduction
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Introduction" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="What is HLB?" class="md-nav__link">
      What is HLB?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/quickstart/" title="Quickstart" class="md-nav__link">
      Quickstart
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorial
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Tutorial" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/lets-begin/" title="Let's begin!" class="md-nav__link">
      Let's begin!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/improving/" title="Improving our program" class="md-nav__link">
      Improving our program
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/arguments/" title="Using arguments" class="md-nav__link">
      Using arguments
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Reference
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Reference" class="md-nav__link md-nav__link--active">
      Reference
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fs-generatefs-frontend" class="md-nav__link">
    fs generate(fs frontend)
  </a>
  
    <nav class="md-nav" aria-label="fs generate(fs frontend)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optiongenerate-frontendinputstring-key-fs-value" class="md-nav__link">
    option::generate frontendInput(string key, fs value)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optiongenerate-frontendoptstring-key-string-value" class="md-nav__link">
    option::generate frontendOpt(string key, string value)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-gitstring-remote-string-ref" class="md-nav__link">
    fs git(string remote, string ref)
  </a>
  
    <nav class="md-nav" aria-label="fs git(string remote, string ref)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optiongit-keepgitdir" class="md-nav__link">
    option::git keepGitDir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-httpstring-url" class="md-nav__link">
    fs http(string url)
  </a>
  
    <nav class="md-nav" aria-label="fs http(string url)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionhttp-checksumstring-digest" class="md-nav__link">
    option::http checksum(string digest)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionhttp-chmodoctal-filemode" class="md-nav__link">
    option::http chmod(octal filemode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionhttp-filenamestring-name" class="md-nav__link">
    option::http filename(string name)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-imagestring-ref" class="md-nav__link">
    fs image(string ref)
  </a>
  
    <nav class="md-nav" aria-label="fs image(string ref)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionimage-resolve" class="md-nav__link">
    option::image resolve()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-localstring-path" class="md-nav__link">
    fs local(string path)
  </a>
  
    <nav class="md-nav" aria-label="fs local(string path)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionlocal-excludepatternsstring-pattern" class="md-nav__link">
    option::local excludePatterns(string pattern)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionlocal-followpathsstring-path" class="md-nav__link">
    option::local followPaths(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionlocal-includepatternsstring-pattern" class="md-nav__link">
    option::local includePatterns(string pattern)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-scratch" class="md-nav__link">
    fs scratch()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fs-fs-copyfs-input-string-src-string-dst" class="md-nav__link">
    fs (fs) copy(fs input, string src, string dst)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) copy(fs input, string src, string dst)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optioncopy-contentsonly" class="md-nav__link">
    option::copy contentsOnly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optioncopy-createdestpath" class="md-nav__link">
    option::copy createDestPath()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optioncopy-followsymlinks" class="md-nav__link">
    option::copy followSymlinks()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optioncopy-unpack" class="md-nav__link">
    option::copy unpack()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-dirstring-path" class="md-nav__link">
    fs (fs) dir(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-envstring-key-string-value" class="md-nav__link">
    fs (fs) env(string key, string value)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-mkdirstring-path-octal-filemode" class="md-nav__link">
    fs (fs) mkdir(string path, octal filemode)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) mkdir(string path, octal filemode)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionmkdir-chownstring-owner" class="md-nav__link">
    option::mkdir chown(string owner)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmkdir-createparents" class="md-nav__link">
    option::mkdir createParents()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmkdir-createdtimestring-created" class="md-nav__link">
    option::mkdir createdTime(string created)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-mkfilestring-path-octal-filemode-string-content" class="md-nav__link">
    fs (fs) mkfile(string path, octal filemode, string content)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) mkfile(string path, octal filemode, string content)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionmkfile-chownstring-owner" class="md-nav__link">
    option::mkfile chown(string owner)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmkfile-createdtimestring-created" class="md-nav__link">
    option::mkfile createdTime(string created)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-rmstring-path" class="md-nav__link">
    fs (fs) rm(string path)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) rm(string path)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionrm-allownotfound" class="md-nav__link">
    option::rm allowNotFound()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrm-allowwildcards" class="md-nav__link">
    option::rm allowWildcards()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-runstring-arg" class="md-nav__link">
    fs (fs) run(string arg)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) run(string arg)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionrun-dirstring-path" class="md-nav__link">
    option::run dir(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-envstring-key-string-value" class="md-nav__link">
    option::run env(string key, string value)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-hoststring-hostname-string-address" class="md-nav__link">
    option::run host(string hostname, string address)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-mountfs-input-string-mountpoint" class="md-nav__link">
    option::run mount(fs input, string mountPoint)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-readonly" class="md-nav__link">
    option::mount readonly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-tmpfs" class="md-nav__link">
    option::mount tmpfs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-sourcepathstring-path" class="md-nav__link">
    option::mount sourcePath(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-cachestring-cacheid-string-sharingmode" class="md-nav__link">
    option::mount cache(string cacheid, string sharingmode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-networkstring-networkmode" class="md-nav__link">
    option::run network(string networkmode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-readonlyrootfs" class="md-nav__link">
    option::run readonlyRootfs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-secretstring-localpath-string-mountpoint" class="md-nav__link">
    option::run secret(string localPath, string mountPoint)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionsecret-uidint-id" class="md-nav__link">
    option::secret uid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionsecret-gidint-id" class="md-nav__link">
    option::secret gid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionsecret-modeoctal-filemode" class="md-nav__link">
    option::secret mode(octal filemode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-securitystring-securitymode" class="md-nav__link">
    option::run security(string securitymode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-ssh" class="md-nav__link">
    option::run ssh()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-targetstring-mountpoint" class="md-nav__link">
    option::ssh target(string mountPoint)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-localpathstring-path" class="md-nav__link">
    option::ssh localPath(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-uidint-id" class="md-nav__link">
    option::ssh uid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-gidint-id" class="md-nav__link">
    option::ssh gid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-modeoctal-filemode" class="md-nav__link">
    option::ssh mode(octal filemode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-userstring-name" class="md-nav__link">
    option::run user(string name)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-shellstring-arg" class="md-nav__link">
    fs (fs) shell(string arg)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-userstring-name" class="md-nav__link">
    fs (fs) user(string name)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../specification/" title="Specification" class="md-nav__link">
      Specification
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fs-generatefs-frontend" class="md-nav__link">
    fs generate(fs frontend)
  </a>
  
    <nav class="md-nav" aria-label="fs generate(fs frontend)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optiongenerate-frontendinputstring-key-fs-value" class="md-nav__link">
    option::generate frontendInput(string key, fs value)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optiongenerate-frontendoptstring-key-string-value" class="md-nav__link">
    option::generate frontendOpt(string key, string value)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-gitstring-remote-string-ref" class="md-nav__link">
    fs git(string remote, string ref)
  </a>
  
    <nav class="md-nav" aria-label="fs git(string remote, string ref)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optiongit-keepgitdir" class="md-nav__link">
    option::git keepGitDir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-httpstring-url" class="md-nav__link">
    fs http(string url)
  </a>
  
    <nav class="md-nav" aria-label="fs http(string url)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionhttp-checksumstring-digest" class="md-nav__link">
    option::http checksum(string digest)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionhttp-chmodoctal-filemode" class="md-nav__link">
    option::http chmod(octal filemode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionhttp-filenamestring-name" class="md-nav__link">
    option::http filename(string name)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-imagestring-ref" class="md-nav__link">
    fs image(string ref)
  </a>
  
    <nav class="md-nav" aria-label="fs image(string ref)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionimage-resolve" class="md-nav__link">
    option::image resolve()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-localstring-path" class="md-nav__link">
    fs local(string path)
  </a>
  
    <nav class="md-nav" aria-label="fs local(string path)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionlocal-excludepatternsstring-pattern" class="md-nav__link">
    option::local excludePatterns(string pattern)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionlocal-followpathsstring-path" class="md-nav__link">
    option::local followPaths(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionlocal-includepatternsstring-pattern" class="md-nav__link">
    option::local includePatterns(string pattern)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-scratch" class="md-nav__link">
    fs scratch()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fs-fs-copyfs-input-string-src-string-dst" class="md-nav__link">
    fs (fs) copy(fs input, string src, string dst)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) copy(fs input, string src, string dst)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optioncopy-contentsonly" class="md-nav__link">
    option::copy contentsOnly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optioncopy-createdestpath" class="md-nav__link">
    option::copy createDestPath()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optioncopy-followsymlinks" class="md-nav__link">
    option::copy followSymlinks()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optioncopy-unpack" class="md-nav__link">
    option::copy unpack()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-dirstring-path" class="md-nav__link">
    fs (fs) dir(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-envstring-key-string-value" class="md-nav__link">
    fs (fs) env(string key, string value)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-mkdirstring-path-octal-filemode" class="md-nav__link">
    fs (fs) mkdir(string path, octal filemode)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) mkdir(string path, octal filemode)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionmkdir-chownstring-owner" class="md-nav__link">
    option::mkdir chown(string owner)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmkdir-createparents" class="md-nav__link">
    option::mkdir createParents()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmkdir-createdtimestring-created" class="md-nav__link">
    option::mkdir createdTime(string created)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-mkfilestring-path-octal-filemode-string-content" class="md-nav__link">
    fs (fs) mkfile(string path, octal filemode, string content)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) mkfile(string path, octal filemode, string content)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionmkfile-chownstring-owner" class="md-nav__link">
    option::mkfile chown(string owner)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmkfile-createdtimestring-created" class="md-nav__link">
    option::mkfile createdTime(string created)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-rmstring-path" class="md-nav__link">
    fs (fs) rm(string path)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) rm(string path)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionrm-allownotfound" class="md-nav__link">
    option::rm allowNotFound()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrm-allowwildcards" class="md-nav__link">
    option::rm allowWildcards()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-runstring-arg" class="md-nav__link">
    fs (fs) run(string arg)
  </a>
  
    <nav class="md-nav" aria-label="fs (fs) run(string arg)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optionrun-dirstring-path" class="md-nav__link">
    option::run dir(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-envstring-key-string-value" class="md-nav__link">
    option::run env(string key, string value)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-hoststring-hostname-string-address" class="md-nav__link">
    option::run host(string hostname, string address)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-mountfs-input-string-mountpoint" class="md-nav__link">
    option::run mount(fs input, string mountPoint)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-readonly" class="md-nav__link">
    option::mount readonly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-tmpfs" class="md-nav__link">
    option::mount tmpfs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-sourcepathstring-path" class="md-nav__link">
    option::mount sourcePath(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionmount-cachestring-cacheid-string-sharingmode" class="md-nav__link">
    option::mount cache(string cacheid, string sharingmode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-networkstring-networkmode" class="md-nav__link">
    option::run network(string networkmode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-readonlyrootfs" class="md-nav__link">
    option::run readonlyRootfs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-secretstring-localpath-string-mountpoint" class="md-nav__link">
    option::run secret(string localPath, string mountPoint)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionsecret-uidint-id" class="md-nav__link">
    option::secret uid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionsecret-gidint-id" class="md-nav__link">
    option::secret gid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionsecret-modeoctal-filemode" class="md-nav__link">
    option::secret mode(octal filemode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-securitystring-securitymode" class="md-nav__link">
    option::run security(string securitymode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-ssh" class="md-nav__link">
    option::run ssh()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-targetstring-mountpoint" class="md-nav__link">
    option::ssh target(string mountPoint)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-localpathstring-path" class="md-nav__link">
    option::ssh localPath(string path)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-uidint-id" class="md-nav__link">
    option::ssh uid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-gidint-id" class="md-nav__link">
    option::ssh gid(int id)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionssh-modeoctal-filemode" class="md-nav__link">
    option::ssh mode(octal filemode)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionrun-userstring-name" class="md-nav__link">
    option::run user(string name)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-shellstring-arg" class="md-nav__link">
    fs (fs) shell(string arg)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fs-fs-userstring-name" class="md-nav__link">
    fs (fs) user(string name)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://openllb.github.io/edit/reference.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                  <h1>Reference</h1>
                
                <h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<h3 id="fs-generatefs-frontend"><span class='hlb-type'>fs</span> generate(<span class='hlb-type'>fs</span> <span class='hlb-variable'>frontend</span>)<a class="headerlink" href="#fs-generatefs-frontend" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>fs</span> <span class='hlb-variable'>frontend</span></p>
<p>a filesystem with an executable that runs a BuildKit gateway GRPC client over stdio.</p>
</div>
<p>Generates a filesystem using an external frontend.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    generate <span class="kt">fs</span> <span class="p">{</span> scratch; <span class="p">}</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        frontendInput <span class="s">&quot;key&quot;</span> <span class="kt">fs</span> <span class="p">{</span> scratch; <span class="p">}</span>
        <span class="nv">frontendOpt</span> <span class="s">&quot;key&quot;</span> <span class="s">&quot;value&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optiongenerate-frontendinputstring-key-fs-value"><span class='hlb-type'>option::generate</span> frontendInput(<span class='hlb-type'>string</span> <span class='hlb-variable'>key</span>, <span class='hlb-type'>fs</span> <span class='hlb-variable'>value</span>)<a class="headerlink" href="#optiongenerate-frontendinputstring-key-fs-value" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>key</span></p>
<p>an unique key for the input.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>fs</span> <span class='hlb-variable'>value</span></p>
<p>a filesystem as an input.</p>
</div>
<p>Provide an input filesystem to the external frontend. Read the documentation
for the frontend to see what it will accept.</p>
<h4 id="optiongenerate-frontendoptstring-key-string-value"><span class='hlb-type'>option::generate</span> frontendOpt(<span class='hlb-type'>string</span> <span class='hlb-variable'>key</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>value</span>)<a class="headerlink" href="#optiongenerate-frontendoptstring-key-string-value" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>key</span></p>
<p>an unique key for the option.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>value</span></p>
<p>a value for the option.</p>
</div>
<p>Provide a key value pair to the external frontend. Read the documentation
for the frontend to see what it will accept.</p>
<h3 id="fs-gitstring-remote-string-ref"><span class='hlb-type'>fs</span> git(<span class='hlb-type'>string</span> <span class='hlb-variable'>remote</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>ref</span>)<a class="headerlink" href="#fs-gitstring-remote-string-ref" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>remote</span></p>
<p>the fully qualified git remote.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>ref</span></p>
<p>the git reference to check out.</p>
</div>
<p>A filesystem with the files from a git repository checked out from
a git reference. Note that by default, the &#x60;.git&#x60; directory is not included.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    git <span class="s">&quot;remote&quot;</span> <span class="s">&quot;ref&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        keepGitDir
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optiongit-keepgitdir"><span class='hlb-type'>option::git</span> keepGitDir()<a class="headerlink" href="#optiongit-keepgitdir" title="Permanent link">&para;</a></h4>
<p>Keeps the &#x60;.git&#x60; directory of the git repository.</p>
<h3 id="fs-httpstring-url"><span class='hlb-type'>fs</span> http(<span class='hlb-type'>string</span> <span class='hlb-variable'>url</span>)<a class="headerlink" href="#fs-httpstring-url" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>url</span></p>
<p>a fully-qualified URL to send a HTTP GET request.</p>
</div>
<p>A filesystem with a file retrieved from a HTTP URL.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    http <span class="s">&quot;url&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        checksum <span class="s">&quot;digest&quot;</span>
        chmod 0644
        filename <span class="s">&quot;name&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionhttp-checksumstring-digest"><span class='hlb-type'>option::http</span> checksum(<span class='hlb-type'>string</span> <span class='hlb-variable'>digest</span>)<a class="headerlink" href="#optionhttp-checksumstring-digest" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>digest</span></p>
<p>a checksum in the form of an OCI digest. https://github.com/opencontainers/image-spec/blob/master/descriptor.md#digests</p>
</div>
<p>Verifies the checksum of the retrieved file against a digest.</p>
<h4 id="optionhttp-chmodoctal-filemode"><span class='hlb-type'>option::http</span> chmod(<span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span>)<a class="headerlink" href="#optionhttp-chmodoctal-filemode" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span></p>
<p>the new permissions of the file in octal.</p>
</div>
<p>Modifies the permissions of the retrieved file.</p>
<h4 id="optionhttp-filenamestring-name"><span class='hlb-type'>option::http</span> filename(<span class='hlb-type'>string</span> <span class='hlb-variable'>name</span>)<a class="headerlink" href="#optionhttp-filenamestring-name" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>name</span></p>
<p>the name of the file.</p>
</div>
<p>Writes the retrieved file with a specified name.</p>
<h3 id="fs-imagestring-ref"><span class='hlb-type'>fs</span> image(<span class='hlb-type'>string</span> <span class='hlb-variable'>ref</span>)<a class="headerlink" href="#fs-imagestring-ref" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>ref</span></p>
<p>a docker registry reference. if not fully qualified, it will be expanded the same as the docker CLI.</p>
</div>
<p>An OCI image&#x27;s filesystem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    image <span class="s">&quot;ref&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        resolve
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionimage-resolve"><span class='hlb-type'>option::image</span> resolve()<a class="headerlink" href="#optionimage-resolve" title="Permanent link">&para;</a></h4>
<p>Resolves the OCI Image Config and inherit its environment, working directory,
and entrypoint.</p>
<h3 id="fs-localstring-path"><span class='hlb-type'>fs</span> local(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#fs-localstring-path" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the local path to the directory to sync up.</p>
</div>
<p>A filesystem with the files synced up from a directory on the
local system.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    local <span class="s">&quot;path&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        excludePatterns <span class="s">&quot;pattern&quot;</span>
        followPaths <span class="s">&quot;path&quot;</span>
        includePatterns <span class="s">&quot;pattern&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionlocal-excludepatternsstring-pattern"><span class='hlb-type'>option::local</span> excludePatterns(<span class='hlb-type'>string</span> <span class='hlb-variable'>pattern</span>)<a class="headerlink" href="#optionlocal-excludepatternsstring-pattern" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>pattern</span></p>
<p>a list of patterns for files that should not be synced.</p>
</div>
<p>Sync only files that do not match any of the excluded patterns.</p>
<h4 id="optionlocal-followpathsstring-path"><span class='hlb-type'>option::local</span> followPaths(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#optionlocal-followpathsstring-path" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>a list of paths to files that may be symlinks.</p>
</div>
<p>Sync the targets of symlinks if path is to a symlink.</p>
<h4 id="optionlocal-includepatternsstring-pattern"><span class='hlb-type'>option::local</span> includePatterns(<span class='hlb-type'>string</span> <span class='hlb-variable'>pattern</span>)<a class="headerlink" href="#optionlocal-includepatternsstring-pattern" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>pattern</span></p>
<p>a list of patterns for files that should be synced.</p>
</div>
<p>Sync only files that match any of the included patterns.</p>
<h3 id="fs-scratch"><span class='hlb-type'>fs</span> scratch()<a class="headerlink" href="#fs-scratch" title="Permanent link">&para;</a></h3>
<p>An empty filesystem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permanent link">&para;</a></h2>
<h3 id="fs-fs-copyfs-input-string-src-string-dst"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) copy(<span class='hlb-type'>fs</span> <span class='hlb-variable'>input</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>src</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>dst</span>)<a class="headerlink" href="#fs-fs-copyfs-input-string-src-string-dst" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>fs</span> <span class='hlb-variable'>input</span></p>
<p>the filesystem to copy from.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>src</span></p>
<p>the path from the input filesystem.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>dst</span></p>
<p>the path in the current filesystem.</p>
</div>
<p>Copies a file from an input filesystem into the current filesystem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    copy <span class="kt">fs</span> <span class="p">{</span> scratch; <span class="p">}</span> <span class="s">&quot;src&quot;</span> <span class="s">&quot;dst&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        contentsOnly
        createDestPath
        followSymlinks
        unpack
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optioncopy-contentsonly"><span class='hlb-type'>option::copy</span> contentsOnly()<a class="headerlink" href="#optioncopy-contentsonly" title="Permanent link">&para;</a></h4>
<p>If the &#x60;src&#x60; path is a directory, only the contents of the directory is
copied to the destination.</p>
<h4 id="optioncopy-createdestpath"><span class='hlb-type'>option::copy</span> createDestPath()<a class="headerlink" href="#optioncopy-createdestpath" title="Permanent link">&para;</a></h4>
<p>Create the parent directories of the destination if they don&#x27;t already exist.</p>
<h4 id="optioncopy-followsymlinks"><span class='hlb-type'>option::copy</span> followSymlinks()<a class="headerlink" href="#optioncopy-followsymlinks" title="Permanent link">&para;</a></h4>
<p>Follow symlinks in the input filesystem and copy the symlink targets too.</p>
<h4 id="optioncopy-unpack"><span class='hlb-type'>option::copy</span> unpack()<a class="headerlink" href="#optioncopy-unpack" title="Permanent link">&para;</a></h4>
<p>If the &#x60;src&#x60; path is an archive, attempt to unpack its contents into the
destination.</p>
<h3 id="fs-fs-dirstring-path"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) dir(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#fs-fs-dirstring-path" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the new working directory.</p>
</div>
<p>Sets the working directory for all subsequent calls in this filesystem block.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    dir <span class="s">&quot;path&quot;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h3 id="fs-fs-envstring-key-string-value"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) env(<span class='hlb-type'>string</span> <span class='hlb-variable'>key</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>value</span>)<a class="headerlink" href="#fs-fs-envstring-key-string-value" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>key</span></p>
<p>the environment key.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>value</span></p>
<p>the environment value.</p>
</div>
<p>Sets an environment key pair for all subsequent calls in this filesystem
block.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    env <span class="s">&quot;key&quot;</span> <span class="s">&quot;value&quot;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h3 id="fs-fs-mkdirstring-path-octal-filemode"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) mkdir(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>, <span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span>)<a class="headerlink" href="#fs-fs-mkdirstring-path-octal-filemode" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the path of the directory.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span></p>
<p>the permissions of the directory.</p>
</div>
<p>Creates a directory in the current filesystem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    mkdir <span class="s">&quot;path&quot;</span> 0644 <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        chown <span class="s">&quot;owner&quot;</span>
        createParents
        createdTime <span class="s">&quot;created&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionmkdir-chownstring-owner"><span class='hlb-type'>option::mkdir</span> chown(<span class='hlb-type'>string</span> <span class='hlb-variable'>owner</span>)<a class="headerlink" href="#optionmkdir-chownstring-owner" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>owner</span></p>
<p>the user:group owner of the directory.</p>
</div>
<p>Change the owner of the directory.</p>
<h4 id="optionmkdir-createparents"><span class='hlb-type'>option::mkdir</span> createParents()<a class="headerlink" href="#optionmkdir-createparents" title="Permanent link">&para;</a></h4>
<p>Create the parent directories if they don&#x27;t exist already.</p>
<h4 id="optionmkdir-createdtimestring-created"><span class='hlb-type'>option::mkdir</span> createdTime(<span class='hlb-type'>string</span> <span class='hlb-variable'>created</span>)<a class="headerlink" href="#optionmkdir-createdtimestring-created" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>created</span></p>
<p>the created time in the RFC3339 format.</p>
</div>
<p>Sets the created time of the directory.</p>
<h3 id="fs-fs-mkfilestring-path-octal-filemode-string-content"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) mkfile(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>, <span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>content</span>)<a class="headerlink" href="#fs-fs-mkfilestring-path-octal-filemode-string-content" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the path of the file.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span></p>
<p>the permissions of the file.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>content</span></p>
<p>the contents of the file.</p>
</div>
<p>Creates a file in the current filesystem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    mkfile <span class="s">&quot;path&quot;</span> 0644 <span class="s">&quot;content&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        chown <span class="s">&quot;owner&quot;</span>
        createdTime <span class="s">&quot;created&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionmkfile-chownstring-owner"><span class='hlb-type'>option::mkfile</span> chown(<span class='hlb-type'>string</span> <span class='hlb-variable'>owner</span>)<a class="headerlink" href="#optionmkfile-chownstring-owner" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>owner</span></p>
<p>the user:group owner of the file.</p>
</div>
<p>Change the owner of the file.</p>
<h4 id="optionmkfile-createdtimestring-created"><span class='hlb-type'>option::mkfile</span> createdTime(<span class='hlb-type'>string</span> <span class='hlb-variable'>created</span>)<a class="headerlink" href="#optionmkfile-createdtimestring-created" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>created</span></p>
<p>the created time in the RFC3339 format.</p>
</div>
<p>Sets the created time of the file.</p>
<h3 id="fs-fs-rmstring-path"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) rm(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#fs-fs-rmstring-path" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the path of the file to remove.</p>
</div>
<p>Removes a file from the current filesystem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    rm <span class="s">&quot;path&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        allowNotFound
        allowWildcards
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionrm-allownotfound"><span class='hlb-type'>option::rm</span> allowNotFound()<a class="headerlink" href="#optionrm-allownotfound" title="Permanent link">&para;</a></h4>
<p>Allows the file to not be found.</p>
<h4 id="optionrm-allowwildcards"><span class='hlb-type'>option::rm</span> allowWildcards()<a class="headerlink" href="#optionrm-allowwildcards" title="Permanent link">&para;</a></h4>
<p>Allows wildcards in the path to remove.</p>
<h3 id="fs-fs-runstring-arg"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) run(<span class='hlb-type'>string</span> <span class='hlb-variable'>arg</span>)<a class="headerlink" href="#fs-fs-runstring-arg" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>arg</span></p>
<p>a command to execute.</p>
</div>
<p>Executes an command in the current filesystem.
If no arguments are given, it will execute the current args set on the
filesystem.
If exactly one arg is given, it will attempt to parse as a command with
shell-style quoting. If it remains a single element, it is executed directly,
otherwise it is run with the current shell.
If more than one arg is given, it will be executed directly, without a shell.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    run <span class="s">&quot;arg&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
        dir <span class="s">&quot;path&quot;</span>
        env <span class="s">&quot;key&quot;</span> <span class="s">&quot;value&quot;</span>
        host <span class="s">&quot;hostname&quot;</span> <span class="s">&quot;address&quot;</span>
        mount <span class="kt">fs</span> <span class="p">{</span> scratch; <span class="p">}</span> <span class="s">&quot;mountPoint&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
            readonly
            tmpfs
            sourcePath <span class="s">&quot;path&quot;</span>
            cache <span class="s">&quot;cacheid&quot;</span> <span class="s">&quot;sharingmode&quot;</span>
        <span class="p">}</span>
        network <span class="s">&quot;networkmode&quot;</span>
        readonlyRootfs
        secret <span class="s">&quot;localPath&quot;</span> <span class="s">&quot;mountPoint&quot;</span> <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
            uid <span class="m">0</span>
            gid <span class="m">0</span>
            mode 0644
        <span class="p">}</span>
        security <span class="s">&quot;securitymode&quot;</span>
        ssh <span class="kr">with</span> <span class="kt">option</span> <span class="p">{</span>
            target <span class="s">&quot;mountPoint&quot;</span>
            localPath <span class="s">&quot;path&quot;</span>
            uid <span class="m">0</span>
            gid <span class="m">0</span>
            mode 0644
        <span class="p">}</span>
        user <span class="s">&quot;name&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h4 id="optionrun-dirstring-path"><span class='hlb-type'>option::run</span> dir(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#optionrun-dirstring-path" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the new working directory.</p>
</div>
<p>Sets the working directory for the duration of the run command.</p>
<h4 id="optionrun-envstring-key-string-value"><span class='hlb-type'>option::run</span> env(<span class='hlb-type'>string</span> <span class='hlb-variable'>key</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>value</span>)<a class="headerlink" href="#optionrun-envstring-key-string-value" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>key</span></p>
<p>the environment key.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>value</span></p>
<p>the environment value.</p>
</div>
<p>Sets an environment key pair for the duration of the run command.</p>
<h4 id="optionrun-hoststring-hostname-string-address"><span class='hlb-type'>option::run</span> host(<span class='hlb-type'>string</span> <span class='hlb-variable'>hostname</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>address</span>)<a class="headerlink" href="#optionrun-hoststring-hostname-string-address" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>hostname</span></p>
<p>the host name of the entry, may include spaces to delimit multiple host names.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>address</span></p>
<p>the IP of the entry.</p>
</div>
<p>Adds a host entry to /etc/hosts for the duration of the run command.</p>
<h4 id="optionrun-mountfs-input-string-mountpoint"><span class='hlb-type'>option::run</span> mount(<span class='hlb-type'>fs</span> <span class='hlb-variable'>input</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>mountPoint</span>)<a class="headerlink" href="#optionrun-mountfs-input-string-mountpoint" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>fs</span> <span class='hlb-variable'>input</span></p>
<p>the additional filesystem to mount. the input&#x27;s root filesystem becomes available from the mountPoint directory.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>mountPoint</span></p>
<p>the directory where the mount is attached.</p>
</div>
<p>Attaches an additional filesystem for the duration of the run command.</p>
<h4 id="optionmount-readonly"><span class='hlb-type'>option::mount</span> readonly()<a class="headerlink" href="#optionmount-readonly" title="Permanent link">&para;</a></h4>
<p>Sets the mount to be attached as a read-only filesystem.</p>
<h4 id="optionmount-tmpfs"><span class='hlb-type'>option::mount</span> tmpfs()<a class="headerlink" href="#optionmount-tmpfs" title="Permanent link">&para;</a></h4>
<p>Sets the mount to be attached as a tmpfs filesystem.</p>
<h4 id="optionmount-sourcepathstring-path"><span class='hlb-type'>option::mount</span> sourcePath(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#optionmount-sourcepathstring-path" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the path in the input filesystem.</p>
</div>
<p>Mount a path from the input filesystem. By default, the root of the input
filesystem is mounted.</p>
<h4 id="optionmount-cachestring-cacheid-string-sharingmode"><span class='hlb-type'>option::mount</span> cache(<span class='hlb-type'>string</span> <span class='hlb-variable'>cacheid</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>sharingmode</span>)<a class="headerlink" href="#optionmount-cachestring-cacheid-string-sharingmode" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>cacheid</span></p>
<p>the unique ID to identify the cache.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>sharingmode</span></p>
<p>the sharing mode of the cache, must be one of the following: - shared: can be used concurrently by multiple writers. - private: creates a new mount if there are multiple writers. - locked: pauses additional writers until the first one releases the mount.</p>
</div>
<p>Cache a snapshot of the mount after the run command has executed. A cacheid
must be provided to uniquely identify the cache mount.
Compilers and package managers commonly have an option to specify cache
directories. Depending on their implementation, it may be safe to share the
cache with concurrent processes. This is adjusted via the &#x60;sharingmode&#x60;
argument.
The cache is modified every time the parent run command is executed. A cache
could also be managed by not using the &#x60;cache&#x60; option. Instead, the mount can
be aliased, and then pushed as an image, so that there it can be a stable
snapshot, or updated externally.</p>
<h4 id="optionrun-networkstring-networkmode"><span class='hlb-type'>option::run</span> network(<span class='hlb-type'>string</span> <span class='hlb-variable'>networkmode</span>)<a class="headerlink" href="#optionrun-networkstring-networkmode" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>networkmode</span></p>
<p>the network mode of the container, must be one of the following: - unset: use the default network provider. - host: use the host&#x27;s network namespace. - none: disable networking.</p>
</div>
<p>Sets the networking mode for the duration of the run command. By default, the
value is &quot;unset&quot; (using BuildKit&#x27;s CNI provider, otherwise its host
namespace).</p>
<h4 id="optionrun-readonlyrootfs"><span class='hlb-type'>option::run</span> readonlyRootfs()<a class="headerlink" href="#optionrun-readonlyrootfs" title="Permanent link">&para;</a></h4>
<p>Sets the rootfs as read-only for the duration of the run command.</p>
<h4 id="optionrun-secretstring-localpath-string-mountpoint"><span class='hlb-type'>option::run</span> secret(<span class='hlb-type'>string</span> <span class='hlb-variable'>localPath</span>, <span class='hlb-type'>string</span> <span class='hlb-variable'>mountPoint</span>)<a class="headerlink" href="#optionrun-secretstring-localpath-string-mountpoint" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>localPath</span></p>
<p>the filepath for a secure file or directory.</p>
</div>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>mountPoint</span></p>
<p>the directory where the secret is attached.</p>
</div>
<p>Mounts a secure file for the duration of the run command. Secrets are
attached via a tmpfs mount, so all the data stays in volatile memory.</p>
<h4 id="optionsecret-uidint-id"><span class='hlb-type'>option::secret</span> uid(<span class='hlb-type'>int</span> <span class='hlb-variable'>id</span>)<a class="headerlink" href="#optionsecret-uidint-id" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>int</span> <span class='hlb-variable'>id</span></p>
<p>the user id.</p>
</div>
<p>Sets the user ID for the secure file. By default, the UID is 0.</p>
<h4 id="optionsecret-gidint-id"><span class='hlb-type'>option::secret</span> gid(<span class='hlb-type'>int</span> <span class='hlb-variable'>id</span>)<a class="headerlink" href="#optionsecret-gidint-id" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>int</span> <span class='hlb-variable'>id</span></p>
<p>the group id.</p>
</div>
<p>Sets the group ID for the secure file. By default, the GID is 0.</p>
<h4 id="optionsecret-modeoctal-filemode"><span class='hlb-type'>option::secret</span> mode(<span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span>)<a class="headerlink" href="#optionsecret-modeoctal-filemode" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span></p>
<p>the new permissions of the secure file in octal.</p>
</div>
<p>Sets the permissions for the secure file. By default, the file mode is 0600.</p>
<h4 id="optionrun-securitystring-securitymode"><span class='hlb-type'>option::run</span> security(<span class='hlb-type'>string</span> <span class='hlb-variable'>securitymode</span>)<a class="headerlink" href="#optionrun-securitystring-securitymode" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>securitymode</span></p>
<p>the security mode of the container, must be one of the following: - sandbox: use the default containerd seccomp profile. - insecure: enables all capabilities.</p>
</div>
<p>Sets the security mode for the duration of the run command. By default, the
value is &quot;sandbox&quot;.</p>
<h4 id="optionrun-ssh"><span class='hlb-type'>option::run</span> ssh()<a class="headerlink" href="#optionrun-ssh" title="Permanent link">&para;</a></h4>
<p>Mounts a SSH socket for the duration of the run command. By default, it will
try to use the SSH socket found from $SSH_AUTH_SOCK. Otherwise, an option
&#x60;localPath&#x60; can be provided to specify a filepath to a SSH auth socket or
*.pem file.</p>
<h4 id="optionssh-targetstring-mountpoint"><span class='hlb-type'>option::ssh</span> target(<span class='hlb-type'>string</span> <span class='hlb-variable'>mountPoint</span>)<a class="headerlink" href="#optionssh-targetstring-mountpoint" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>mountPoint</span></p>
<p>the directory where the SSH agent socket is attached.</p>
</div>
<p>Sets the target directory to mount the SSH agent socket. By default, it is
mounted to &#x60;/run/buildkit/ssh_agent.${N}&#x60;, where N is the index of the SSH
socket. If $SSH_AUTH_SOCK is not set, it will set SSH_AUTH_SOCK to the
mountPoint.</p>
<h4 id="optionssh-localpathstring-path"><span class='hlb-type'>option::ssh</span> localPath(<span class='hlb-type'>string</span> <span class='hlb-variable'>path</span>)<a class="headerlink" href="#optionssh-localpathstring-path" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>path</span></p>
<p>the path to a local SSH agent socket or PEM key.</p>
</div>
<p>Sets the path to a local SSH agent socket or PEM key, with support for
passphrases. By default, the SSH agent defined by $SSH_AUTH_SOCK will be
mounted into the container.</p>
<h4 id="optionssh-uidint-id"><span class='hlb-type'>option::ssh</span> uid(<span class='hlb-type'>int</span> <span class='hlb-variable'>id</span>)<a class="headerlink" href="#optionssh-uidint-id" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>int</span> <span class='hlb-variable'>id</span></p>
<p>the user ID.</p>
</div>
<p>Sets the user ID for the SSH agent socket. By default, the UID is 0.</p>
<h4 id="optionssh-gidint-id"><span class='hlb-type'>option::ssh</span> gid(<span class='hlb-type'>int</span> <span class='hlb-variable'>id</span>)<a class="headerlink" href="#optionssh-gidint-id" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>int</span> <span class='hlb-variable'>id</span></p>
<p>the group ID.</p>
</div>
<p>Sets the group ID for the SSH agent socket. By default, the GID is 0.</p>
<h4 id="optionssh-modeoctal-filemode"><span class='hlb-type'>option::ssh</span> mode(<span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span>)<a class="headerlink" href="#optionssh-modeoctal-filemode" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>octal</span> <span class='hlb-variable'>filemode</span></p>
<p>the new permissions of the SSH agent socket in octal.</p>
</div>
<p>Sets the permissions for the SSH agent socket. By default, the file mode is
0600.</p>
<h4 id="optionrun-userstring-name"><span class='hlb-type'>option::run</span> user(<span class='hlb-type'>string</span> <span class='hlb-variable'>name</span>)<a class="headerlink" href="#optionrun-userstring-name" title="Permanent link">&para;</a></h4>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>name</span></p>
<p>the name of the user.</p>
</div>
<p>Sets the current user for the duration of the run command.</p>
<h3 id="fs-fs-shellstring-arg"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) shell(<span class='hlb-type'>string</span> <span class='hlb-variable'>arg</span>)<a class="headerlink" href="#fs-fs-shellstring-arg" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>arg</span></p>
<p>the list of args used to prefix &#x60;run&#x60; statements.</p>
</div>
<p>Sets the current shell command to use when executing subsequent &#x60;run&#x60;
methods. By default, this is [&quot;sh&quot;, &quot;-c&quot;].</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    shell <span class="s">&quot;arg&quot;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h3 id="fs-fs-userstring-name"><span class='hlb-type'>fs</span> (<span class='hlb-type'>fs</span>) user(<span class='hlb-type'>string</span> <span class='hlb-variable'>name</span>)<a class="headerlink" href="#fs-fs-userstring-name" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title"><span class='hlb-type'>string</span> <span class='hlb-variable'>name</span></p>
<p>the name of the user.</p>
</div>
<p>Sets the current user for all subsequent calls in this filesystem block.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kt">fs</span> <span class="nf">default</span><span class="p">()</span> <span class="p">{</span>
    scratch
    user <span class="s">&quot;name&quot;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<style>
.hlb-type {
    color: #d73a49
}

.hlb-variable {
    color: #0366d6
}
</style>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../tutorial/arguments/" title="Using arguments" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Using arguments
              </div>
            </div>
          </a>
        
        
          <a href="../specification/" title="Specification" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Specification
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../js/asciinema-player.js"></script>
      
    
  </body>
</html>